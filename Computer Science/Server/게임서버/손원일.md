# 게임서버
스터디 일시 : 24.06.07

### 게임 서버, 클라이언트
&nbsp;게임의 기본적인 로직은 사용자의 입력에 따른 게임 규칙에 맞게 처리 처리 후 재 렌더링을 하게 됩니다.<br/>
&nbsp;싱글 플레이의 경우( 스토리 진행 게임, 탄막 슈팅게임 등등 ) 네트워크를 통해서 서버와의 통신이 굳이 필요하지 않기 때문에 클라이언트 부분에서 입력, 규칙에 맞는 로직, 렌더링 부분을 구현하고 처리하게 됩니다.<br/>
&nbsp;멀티 플레이의 경우( FPS, MMORPG 등등 ) 네트워크를 통해 서버에 사용자의 입력을 전달하고 규칙에 맞는 로직을 처리 후 서버에서 클라이언트에게 결과(응답)을 전송하고 응답에 맞는 처리를 클라이언트 측에서 처리를 해야한다.

### 게임 서버와 웹 서버의 차이
&nbsp;웹 서버 즉, HTTP 서버는 대체로 Stateless 서버로 클라이언트가 요청을 보낼때 요청에 맞게 응답을 하는 서버이며, Request와 Response 형태로 데이터를 주고 받게 되며 Stateless이기 때문에 요청과 응답을 주고 받으면 서버에서는 더이상 클라이언트의 상태를 저장해두고 있지 않게됩니다.<br/>
![웹서버](https://github.com/user-attachments/assets/780d7ce8-dc9b-489a-b42e-2655a6effcf0)<br/>
&nbsp;그러나, 게임 서버는 클라이언트의 요청을 보내지 않아도 서버측에서 클라이언트로 데이터를 전송해야하는 상황이 있다는 차이점이 존재하기 때문에 Stateful 서버이며, 클라이언트가 서버에 패킷을 전송해도 서버는 응답을 보내지 않아도 되며 요청하지 않았을 경우에도 서버에서 클라이언트로 패킷을 전송할 수 있어야합니다.<br/>
![게임서버](https://github.com/user-attachments/assets/fc335283-fd87-4f3f-b236-63dfe70ce954)<br/>
&nbsp;FPS, MMORPG와 같은 여러 플레이어가 동일한 공간( 맵 )에 위치하여 오브젝트와 상호작용하여 이 정보를 모두에게 공유해야할 때 실시간 통신이 중요하며, 이를 위해 서버 측에서는 최소한의 로직을 처리해야합니다.<br/>
![image](https://github.com/user-attachments/assets/eb067a39-4f17-475a-9f0d-ca0c5622554d)<br/>
&nbsp;그러나 SNG(Social Network Game) 장르[소셜 네트워크 서비스 플랫폼 기반으로 사용자 온라인 인맥을 활용하여 서로 경쟁하는 게임 ex) 클래시 오브 클랜, 쿠키런 킹덤]은 상대의 맵의 정보만 얻어올 수 있다면 실시간으로 정보를 공유하지 않아도 되기 때문에 이러한 종류의 장르는 웹서버와 동일하게 Stateless 서버를 사용하여도 무관합니다.<br/>
![image](https://github.com/user-attachments/assets/7543b759-603f-42e4-a7bb-4a144dc64260)<br/>

&rarr; 점점 게임 컨텐츠가 다양해 지면서 Stateful만, Stateless만 사용하는 형식이 아닌 두가지 방식이 함께 적용되어 사용되고 있습니다
ex) 
- 비동기 온라인게임 (Stateless) + 실시간 채팅(Stateful)
- 비동기 온라인게임 (Stateless) + 실시간 pvp(Stateful)
- 실시간 온라인게임 (Stateful) + 랭킹 시스템 (Stateless)
등등..

&nbsp;그리고, 클라이언트도 마찬가지로 서버에 요청을하고 응답이 왔을 때 해당응답에 대한 렌더링이 꼭 이루어질 필요는 없으며, 요청을 하지 않았을 때에도 서버에서 온 패킷에 대하여 렌더링이 필요한 경우도 있다.

### 게임서버 최적화
&nbsp;실시간 통신이 필요로하는 멀티 게임환경에서 사용자의 입력에 따른 전체 처리 로직을 서버가 전담하여 처리하는 방식이 아닌 클라이언트에서 처리할 수 있는 부분은 클라이언트에서 처리를 하고 다른 사용자 혹은 게임 자체에 영향을 미칠 수 있는 처리는 서버에게 요청하여 처리를 하는 방식으로 로직을 분담하여 처리함으로 서버의 부담을 줄여 실시간 통신의 성능을 높히는 방식을 사용합니다.

RPG를 예를 들어 본다면 플레이어 **A,B,C** 가 몬스터 **α**를 레이드하고 있는 상황에서<br/> 
&nbsp;<U>각 플레이어들의 스킬 쿨타임 계산, 애니메이션 실행 여부(모션, 이펙트 표현)등</U>은 플레이어의 로컬 pc 즉 클라이언트 측에서 처리를 하는것이 실시간 통신의 성능을 향상 시킬 수 있을 것이고,<br/>
&nbsp;<U>플레이어의 HP, MP, 위치, 스킬 사용 여부 정보, 몬스터에 가해진 데미지에 따른 몬스터의 체력 변동 사항 등</U> 게임의 전반적인 규칙과 관련된 내용은 서버에게 전송하여 서버가 해당 정보를 필요로하는 사용자엘게 데이터를 전송하게끔하여야합니다.

### 게임서버의 종류
### Unity에서 지원하는 게임서버
### Unreal에서 지원하는 게임서버
### 게임서버를 직접 제작하기 위해선?